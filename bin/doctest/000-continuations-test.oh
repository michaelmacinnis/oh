#!/usr/bin/env oh

# KEYWORD: test
# PROVIDE: continuations

## Oh is properly tail-recursive and exposes continuations as first-class
## values:
##
#{
define label: method () as: return return
define continue: method (label) as: label label

define count: integer 0
define loop: label
if (lt count (integer 100)) {
        set count: add count 1
#        echo: "Hello, World! (%s)"::sprintf count
        echo: interpolate "Hello, World! (${count})"
        continue loop
}
#}
##

#-     Hello, World! (1)
#-     Hello, World! (2)
#-     Hello, World! (3)
#-     Hello, World! (4)
#-     Hello, World! (5)
#-     Hello, World! (6)
#-     Hello, World! (7)
#-     Hello, World! (8)
#-     Hello, World! (9)
#-     Hello, World! (10)
#-     Hello, World! (11)
#-     Hello, World! (12)
#-     Hello, World! (13)
#-     Hello, World! (14)
#-     Hello, World! (15)
#-     Hello, World! (16)
#-     Hello, World! (17)
#-     Hello, World! (18)
#-     Hello, World! (19)
#-     Hello, World! (20)
#-     Hello, World! (21)
#-     Hello, World! (22)
#-     Hello, World! (23)
#-     Hello, World! (24)
#-     Hello, World! (25)
#-     Hello, World! (26)
#-     Hello, World! (27)
#-     Hello, World! (28)
#-     Hello, World! (29)
#-     Hello, World! (30)
#-     Hello, World! (31)
#-     Hello, World! (32)
#-     Hello, World! (33)
#-     Hello, World! (34)
#-     Hello, World! (35)
#-     Hello, World! (36)
#-     Hello, World! (37)
#-     Hello, World! (38)
#-     Hello, World! (39)
#-     Hello, World! (40)
#-     Hello, World! (41)
#-     Hello, World! (42)
#-     Hello, World! (43)
#-     Hello, World! (44)
#-     Hello, World! (45)
#-     Hello, World! (46)
#-     Hello, World! (47)
#-     Hello, World! (48)
#-     Hello, World! (49)
#-     Hello, World! (50)
#-     Hello, World! (51)
#-     Hello, World! (52)
#-     Hello, World! (53)
#-     Hello, World! (54)
#-     Hello, World! (55)
#-     Hello, World! (56)
#-     Hello, World! (57)
#-     Hello, World! (58)
#-     Hello, World! (59)
#-     Hello, World! (60)
#-     Hello, World! (61)
#-     Hello, World! (62)
#-     Hello, World! (63)
#-     Hello, World! (64)
#-     Hello, World! (65)
#-     Hello, World! (66)
#-     Hello, World! (67)
#-     Hello, World! (68)
#-     Hello, World! (69)
#-     Hello, World! (70)
#-     Hello, World! (71)
#-     Hello, World! (72)
#-     Hello, World! (73)
#-     Hello, World! (74)
#-     Hello, World! (75)
#-     Hello, World! (76)
#-     Hello, World! (77)
#-     Hello, World! (78)
#-     Hello, World! (79)
#-     Hello, World! (80)
#-     Hello, World! (81)
#-     Hello, World! (82)
#-     Hello, World! (83)
#-     Hello, World! (84)
#-     Hello, World! (85)
#-     Hello, World! (86)
#-     Hello, World! (87)
#-     Hello, World! (88)
#-     Hello, World! (89)
#-     Hello, World! (90)
#-     Hello, World! (91)
#-     Hello, World! (92)
#-     Hello, World! (93)
#-     Hello, World! (94)
#-     Hello, World! (95)
#-     Hello, World! (96)
#-     Hello, World! (97)
#-     Hello, World! (98)
#-     Hello, World! (99)
#-     Hello, World! (100)

